<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">

<!--2026/02/10 17:56:24-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta http-equiv="Content-Script-Type" content="text/javascript">
  <meta name="GENERATOR" content="ホームページV4">
  <title>Setup of RaspberryPi 4 - Kitaya lab</title>
  <link rel="stylesheet" href="02_white_a0_0010.css" type="text/css" media="all">
</head>

<body>
  <div id="page">
  <div id="header">operanthouseのヘッダー</div>
  <div id="title">
  <h1>Kitaya lab</h1></div>
  <div id="menubar"><div class="mainmenu"><ul><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="index.html" class="mainmenuitemlink"><span class="mainmenuitemmark">オペラントハウスとは</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="office1001038.html" class="mainmenuitemlink"><span class="mainmenuitemmark">What's Operant House?</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="profile1.html" class="mainmenuitemlink"><span class="mainmenuitemmark">行動解析君とは?</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="profile1076.html" class="mainmenuitemlink"><span class="mainmenuitemmark">Mr. Behavio?</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="profile1001.html" class="mainmenuitemlink"><span class="mainmenuitemmark">Gait analyzer</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="privacy1.html" class="mainmenuitemlink"><span class="mainmenuitemmark">プライバシーポリシー</span></a></span></span></span></li></ul>
</div></div>
  <div id="side1">
  <div class="submenu"><ul><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001038.html" class="submenuitemlink"><span class="submenuitemmark1">What's Operant House?</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001039.html" class="submenuitemlink"><span class="submenuitemmark1">Preparation(Download)</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank004.html" class="submenuitemlink"><span class="submenuitemmark1">Production of the OperantHouse</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001042.html" class="submenuitemlink"><span class="submenuitemmark2">Parts printing</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001043.html" class="submenuitemlink"><span class="submenuitemmark2">Parts assembling</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001044.html" class="submenuitemlink"><span class="submenuitemmark2">Electronic circuit production #1</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001045.html" class="submenuitemlink"><span class="submenuitemmark2">Electronic circuit production #2</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001046.html" class="submenuitemlink"><span class="submenuitemmark2">Installation of Electronics on the Body</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001047.html" class="submenuitemlink"><span class="submenuitemmark2">Installation of Electronics on the Roof</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001049.html" class="submenuitemlink"><span class="submenuitemmark2">Wiring of each Components</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001050.html" class="submenuitemlink"><span class="submenuitemmark2">Setup of RaspberryPi 4</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001101.html" class="submenuitemlink"><span class="submenuitemmark2">Setup of RaspberryPi 5</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank005.html" class="submenuitemlink"><span class="submenuitemmark1">About Option Parts</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001055.html" class="submenuitemlink"><span class="submenuitemmark1">Handling of OperantHouse</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank006.html" class="submenuitemlink"><span class="submenuitemmark1">Custom task</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001072.html" class="submenuitemlink"><span class="submenuitemmark1">Command list</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001073.html" class="submenuitemlink"><span class="submenuitemmark1">Default tasks</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001063.html" class="submenuitemlink"><span class="submenuitemmark1">Tips</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001064.html" class="submenuitemlink"><span class="submenuitemmark1">Troubleshooting</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001102.html" class="submenuitemlink"><span class="submenuitemmark1">Copyright</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001071.html" class="submenuitemlink"><span class="submenuitemmark1">日本語ページへ</span></a></span></span></span></li></ul>
</div></div>
  <div id="side2"></div>
  <div id="main_wrapper000" class="HPZAutoMarginAdjuster">
  <div id="main">
  <h1>Setup of RaspberryPi 4</h1>
  <hr>
  <br clear="all">
  <br clear="all">
  Raspberry PI OS (32bit) released on 2022/9/22 is used in this instruction so if you have any trouble in installation with the latest version, please find and use the same version from here,<br clear="all">
  http://downloads.raspberrypi.org/raspbian/images/<br clear="all">
  <br clear="all">
  <br clear="all">
  Connect keyboard and mouse. If you don't have wifi access, connect ethernet cable (Some Universities don't allow wifi access from Raspi so ask IT office if you cannot connect it). Turn on the switch on the power cable of the Raspi.<br clear="all">
  <br clear="all">
  After the initial setting, you will the desktop.<br clear="all">
  <img src="paste267.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>Install the soft keyboard</h2>
  (https://pimylifeup.com/raspberry-pi-on-screen-keyboard/)<br clear="all">
  <br clear="all">
  To save a space for the keyboard, install a soft keyboard.<br clear="all">
  Run the terminal by clicking the icon.<br clear="all">
  <img src="paste1282.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  We can install various software in this terminal.<br clear="all">
  <img src="paste269.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  First, to update Raspberry Pi OS, enter the following text into the terminal and press Enter.<br clear="all">
  <img src="paste270.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  Then, type the following command.<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">sudo apt upgrade</font><br clear="all">
  <font color="MidnightBlue">sudo apt install onboard</font><br clear="all">
  <br clear="all">
  When asked &quot;Do you want to continue?&quot; type &quot;y&quot; and press Enter.<br clear="all">
  &quot;Onboard&quot; is the virtual keyboard software. You can find it in the &quot;Universal access&quot; in the start menu as shown below.<br clear="all">
  <img src="paste2711.jpg" alt="" border="0"><img src="paste272.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>Turn off the sleep function</h2>
  Raspi will sleep after a certain period of time without operation. To deactivate this function, run &quot;Raspberry Pi Configuration&quot;.<br clear="all">
  <img src="paste135.jpg" alt="" height="403" width="328" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  Set screen blanking to disable and reboot Raspi.<br clear="all">
  <img src="paste2731.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>Install OpenCV</h2>
  (https://raspberrypi-guide.github.io/programming/install-opencv)<br clear="all">
  <br clear="all">
  OpenCV which is necessary for the camera capturing so let's install this library package.<br clear="all">
  <br clear="all">
  Before installing OpenCV, install packages required for OpenCV. You can paste to the terminal by right clicking and chose &quot;paste&quot; on the terminal window.<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">sudo apt-get install build-essential cmake pkg-config libjpeg-dev libtiff5-dev libjasper-dev libpng-dev libavcodec-dev libavformat-dev libswscale-dev libv4l-dev libxvidcore-dev libx264-dev libfontconfig1-dev libcairo2-dev libgdk-pixbuf2.0-dev libpango1.0-dev libgtk2.0-dev libgtk-3-dev libatlas-base-dev gfortran libhdf5-dev libhdf5-serial-dev libhdf5-103 python3-pyqt5 python3-dev -y</font><br clear="all">
  <br clear="all">
  Then install OpenCV as followed,<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">pip install opencv-python==4.5.3.56</font><br clear="all">
  <br clear="all">
  Install NumPy as well,<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">pip install -U numpy</font><br clear="all">
  <br clear="all">
  Check if the installation was successful or not by the following commands,<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">python3</font><br clear="all">
  <font color="MidnightBlue">import cv2</font><br clear="all">
  <font color="MidnightBlue">cv2.__version__</font><br clear="all">
  <br clear="all">
  If you see the version number, OpenCV has been successfully installed. <br clear="all">
  Enter the following command to exit python mode,<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">exit()</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>Install Arduino editor</h2>
  <h2><br class="HPZAutoBR"></h2>
  You need to install Arduino editor to send a program to Arduino from Raspi.<br clear="all">
  Enter the following install command,<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">sudo apt install arduino</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>Install Operant House</h2>
  <br clear="all">
  Download program of OperantHouse from the follow nad unzip it to the desktop.<br clear="all">
  <a href="OperantHouse_230221.zip" class="HPZFile">OperantHouse_230221.zip</a><br clear="all">
  <br clear="all">
  <img src="paste2641.jpg" alt="" border="0"><br clear="all">
  <img src="paste1311.jpg" alt="" height="217" width="368" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  When you see this, press the up arrow to move one level forward.<br clear="all">
  <img src="paste1321.jpg" alt="" height="260" width="598" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  Drag and drop the OperantHouse folder to the desktop.<br clear="all">
  <img src="paste1322.jpg" alt="" height="308" width="666" border="0"><br clear="all">
  <br clear="all">
  Transfer the Arduino program to the connected Arduino. Open the following file,<br clear="all">
  OperantHouse --&gt; SerialConnectionWithPython** --&gt; SerialConnectionWithPython**.ino<br clear="all">
  <br clear="all">
  Chose the activated port by clicking Tools --&gt; Port. Then click right arrow icon to transfer and build the program.<br clear="all">
  <img src="paste13241.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  Everything to run OperantHouse is ready now.<br clear="all">
  Find Thonny and run it (I recommend to set Thonny as default to run python program).<img src="paste2563.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  Load the latest OperantHouse program (OperantHouse*.py)<br clear="all">
  <img src="paste2591.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  See if the basical setting is set as followed. If different number is substituted, correct it.<img src="paste2651.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  If the monitor resolution is not 1280x800 pixels, change the values here. The size and position of the touch window are determined based on these values.<br clear="all">
  <img src="paste4023.jpg" alt="" height="389" width="625" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  Click &quot;Run&quot;.<br clear="all">
  <img src="paste2564.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  These are windows of OperantHouse.<br clear="all">
  You can show/hide touch-screen window by clicking &quot;TouchWin button&quot; and resize camera window by clicking CamSize button.<br clear="all">
  <img src="paste2565.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  Check if you see the image in the camera window.<br clear="all">
  <img src="paste259.jpg" alt="" height="514" width="860" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  Check if you can switch cue LED, infrared LEDs, roof illuminations and servo with the following buttons.<br clear="all">
  <img src="paste2566.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  If everything works well, you have successfully installed OperantHouse. Click the &quot;Exit&quot; button on the left of the main window or &quot;Stop&quot; button on Thonny to close the program.<br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>Change the color of the desktop</h2>
  Let's darken the color of the desktop not to distruct subject animal.<br clear="all">
  Right-click on an empty space of the desktop and select &quot;Desktop Preferences.&quot;<br clear="all">
  <img src="paste264.jpg" alt="" height="176" width="194" border="0"><br clear="all">
  <br clear="all">
  Set as followed and click &quot;OK.&quot;<br clear="all">
  <img src="paste2653.jpg" alt="" height="241" width="337" border="0"><img src="paste26811.jpg" alt="" height="241" width="336" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  If you'll make multiple devices, I reccomend you to create a image copy of the SD card at this point because it is not feasible to repeat these initial setting for every device. You can find the way in &quot;Tips&quot; on the left menu.<br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>Install TeamViewer</h2>
  To operate the device remotely, install TeamViwer(remote desktop software). You can find the installer for Raspi in the official site.<br clear="all">
  <img src="paste2567.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  Launch TeamViewer. Enter the device name and chose dark theme and assign TeamViewer account (create it if you don't have).<br clear="all">
  <img src="paste2642.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  Click Security tab and check &quot;Easy Access&quot; to skip password entry. Check if you can access the Raspi from your computer.<br clear="all">
  <img src="paste2652.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  The configuration of the Raspi has done.<br clear="all">
  <br clear="all">
  The process after this dependons on the optional parts. <br clear="all">
  1. If you'll use only touch-screen, go to Option parts assemble(Touch-screen) page.<br clear="all">
  2. If you'll use lever modules, go to Option parts assemble(Lever) page.<br clear="all">
  3. If you'll use sensor bar (NNAMC3460PCEV), go to Option parts assemble(Sensor bar) page.<br clear="all">
  <br clear="all">
  If you are not sure you should take option 1 or 3, try 1 first (option 3 is only needed when holes are vertical shape and there is little space between adjuscent mask holes).</div>
  </div>
  <div id="footer">operanthouseのフッター</div>
  <div id="HPZLPPageTail" style="clear: both;"></div></div>
</body>

</html>
