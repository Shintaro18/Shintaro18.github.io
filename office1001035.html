<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">

<!--2026/02/10 17:56:22-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta http-equiv="Content-Script-Type" content="text/javascript">
  <meta name="GENERATOR" content="ホームページV4">
  <title>7. コードの改変 その1 - Kitaya lab</title>
  <link rel="stylesheet" href="02_white_a0_0010.css" type="text/css" media="all">
</head>

<body>
  <div id="page">
  <div id="header">operanthouseのヘッダー</div>
  <div id="title">
  <h1>Kitaya lab</h1></div>
  <div id="menubar"><div class="mainmenu"><ul><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="index.html" class="mainmenuitemlink"><span class="mainmenuitemmark">オペラントハウスとは</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="office1001038.html" class="mainmenuitemlink"><span class="mainmenuitemmark">What's Operant House?</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="profile1.html" class="mainmenuitemlink"><span class="mainmenuitemmark">行動解析君とは?</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="profile1076.html" class="mainmenuitemlink"><span class="mainmenuitemmark">Mr. Behavio?</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="profile1001.html" class="mainmenuitemlink"><span class="mainmenuitemmark">Gait analyzer</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="privacy1.html" class="mainmenuitemlink"><span class="mainmenuitemmark">プライバシーポリシー</span></a></span></span></span></li></ul>

</div></div>
  <div id="side1">
  <div class="submenu"><ul><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="index.html" class="submenuitemlink"><span class="submenuitemmark1">オペラントハウスとは?</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001.html" class="submenuitemlink"><span class="submenuitemmark1">制作の準備(ﾀﾞｳﾝﾛｰﾄﾞ)</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank.html" class="submenuitemlink"><span class="submenuitemmark1">3Dプリンターの準備</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank001.html" class="submenuitemlink"><span class="submenuitemmark1">オペラントハウスの製作</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank002.html" class="submenuitemlink"><span class="submenuitemmark1">オプションパーツについて</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001018.html" class="submenuitemlink"><span class="submenuitemmark1">ｵﾍﾟﾗﾝﾄﾊｳｽの使い方</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank003.html" class="submenuitemlink"><span class="submenuitemmark1">オリジナル課題の追加</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001030.html" class="submenuitemlink"><span class="submenuitemmark2">1. 準備</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001017.html" class="submenuitemlink"><span class="submenuitemmark2">2. コードの概要</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001031.html" class="submenuitemlink"><span class="submenuitemmark2">3. Phase0について</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001032.html" class="submenuitemlink"><span class="submenuitemmark2">4. Saveについて</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001033.html" class="submenuitemlink"><span class="submenuitemmark2">5. Phase1について</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001034.html" class="submenuitemlink"><span class="submenuitemmark2">6. Phase2について</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001035.html" class="submenuitemlink"><span class="submenuitemmark2">7. コードの改変 その1</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001067.html" class="submenuitemlink"><span class="submenuitemmark2">8. コードの改変 その2</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001068.html" class="submenuitemlink"><span class="submenuitemmark2">9. レバーを使う課題に改変</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001036.html" class="submenuitemlink"><span class="submenuitemmark1">Command list</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001069.html" class="submenuitemlink"><span class="submenuitemmark1">デフォルト課題の説明</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001010.html" class="submenuitemlink"><span class="submenuitemmark1">Tips</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001037.html" class="submenuitemlink"><span class="submenuitemmark1">トラブルシューティング</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001103.html" class="submenuitemlink"><span class="submenuitemmark1">About copyright</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001070.html" class="submenuitemlink"><span class="submenuitemmark1">Go to English page</span></a></span></span></span></li></ul>
</div></div>
  <div id="side2"></div>
  <div class="HPZAutoMarginAdjuster" id="main_wrapper000">
  <div id="main">
  <h1>7. コードの改変 その1</h1>
  <br clear="all">
  <br clear="all">
  これから作る課題91では一番左、もしくは右のパネルのどちらかが点灯し、点灯したパネルをタッチすると報酬が、点灯していないパネルをタッチすると罰が与えられる課題です。中心のマスクホールは今回は使用しません。<br clear="all">
  <img src="paste4.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  新しい課題を91番として作成して行きます。<br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">def PutTaskButton():</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;ButtonWidth = 12</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;Row=0</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;・・・</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;bTask50 = ttk.Button(MainWindowRightFrame, text='ProbRevers(50)', command=functools.partial(SwitchToSelectedTask, 50), width=ButtonWidth).grid(row=Row, column=Column)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;Column += 1</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;bTask90 = ttk.Button(MainWindowRightFrame, text='Test(90)', command=functools.partial(SwitchToSelectedTask, 90), width=ButtonWidth).grid(row=Row, column=Column)</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp;Column += 1</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp;bTask91 = ttk.Button(MainWindowRightFrame, text='Test2(91)', command=functools.partial(SwitchToSelectedTask, 91), width=ButtonWidth).grid(row=Row, column=Column)</font><br clear="all">
 &nbsp; &nbsp;<font color="MidnightBlue">return</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  まずは課題選択画面での課題91のボタンを作成します。<br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Black">ボタンが追加されました。</font><br clear="all">
  <img src="paste510.jpg" alt="" height="158" width="452" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">def SwitchToSelectedTask(ChosenTask): &nbsp; # Initialize for the starting of the task</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;global Task, Phase, DispVariable</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;Task = ChosenTask</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;・・・</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp;Task50()</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;if Task == 90:</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp;Task90()</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp;if Task == 91:</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp;Task91()</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;return</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  ボタンを押したら実行される関数に課題91を追加します。<br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Black">これでボタンを押したらTask91()に入るようになりました。</font><br clear="all">
  <font color="Black">次に課題91本体のコードを書いていきましょう。課題90をベースにするので課題90のコードを丸ごとコピーしてその下に課題91として貼り付けてください。</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">def Task90(): &nbsp; # Test task</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;global Phase</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;Phase0_Init = 0</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">・・・</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SetDispVariable(0, 'Phase2', str(Phase2)) &nbsp;# Display &quot;Phase2&quot; value on the bottom of main window</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp;return</font><br clear="all">
  <br clear="all">
  <font color="Blue">def Task91(): &nbsp; # Test2 task</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp;global Phase</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp;Phase0_Init = 0</font><br clear="all">
  <br clear="all">
  <font color="Blue">・・・</font><br clear="all">
  <br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SetDispVariable(0, 'Phase2', str(Phase2)) &nbsp;# Display &quot;Phase2&quot; value on the bottom of main window</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp;return</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">def StartRecording(): &nbsp; # Start camera caputring</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MaxCorrectNumVar = IntVar(MainWindowRoot) &nbsp;# Declare a variable for input column</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;iMaxCorrectNum = ttk.Entry(MainWindowRightFrame, textvariable=MaxCorrectNumVar, width=ColumnWidth).grid(row=1, column=0) &nbsp;# Create input column and link it with the variable</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font><font color="Blue">mMaxTrialNum = ttk.Label(MainWindowRightFrame, text='MaxTrialNum', width=ColumnWidth).grid(row=0, column=1, sticky=W)</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MaxTrialNumVar = IntVar(MainWindowRoot) &nbsp;# Declare a variable for input column</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;iMaxTrialNum = ttk.Entry(MainWindowRightFrame, textvariable=MaxTrialNumVar, width=ColumnWidth).grid(row=1, column=1)</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mTimeLimit = ttk.Label(MainWindowRightFrame, text='TimeLimit(min)', width=ColumnWidth).grid(</font><font color="Blue">row=0, column=2</font><font color="MidnightBlue">, sticky=W)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TimeLimitVar = IntVar(MainWindowRoot)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;iTimeLimit = ttk.Entry(MainWindowRightFrame, textvariable=TimeLimitVar, width=ColumnWidth).grid(</font><font color="Blue">row=1, column=2</font><font color="MidnightBlue">)</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font><font color="Blue">mPunishDur = ttk.Label(MainWindowRightFrame, text='PunishDur(s)', width=ColumnWidth).grid(row=0, column=3, sticky=W)</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PunishDurVar = IntVar(MainWindowRoot)</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;iPunishDur = ttk.Entry(MainWindowRightFrame, textvariable=PunishDurVar, width=ColumnWidth).grid(row=1, column=3)</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mLickDur = ttk.Label(MainWindowRightFrame, text='LickDur(s)', width=ColumnWidth).grid(</font><font color="Blue">row=0, column=4</font><font color="MidnightBlue">, sticky=W)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LickDurVar = IntVar(MainWindowRoot)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;iLickDur = ttk.Entry(MainWindowRightFrame, textvariable=LickDurVar, width=ColumnWidth).grid(</font><font color="Blue">row=1, column=4</font><font color="MidnightBlue">)</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">課題のパラメータを追加します。またそれに合わせて既存のボタンの位置もrowとcolumnの値を変えてずらします。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Black">これで以下の欄が追加されました。</font><br clear="all">
  <img src="paste1723.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<font color="MidnightBlue">else: &nbsp;# If save file doesn't exist</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MaxCorrectNumVar.set(80) &nbsp;# Substitute 80 into the variable</font><br clear="all">
  <br clear="all">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;i<font color="Blue">f os.path.exists(Str + '/MaxTrialNum.dat') == True:</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with open(Str + '/MaxTrialNum.dat', 'rb') as PickleInst[GetTaskID()]:</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MaxTrialNumVar.set(pickle.load(PickleInst[GetTaskID()]))</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;else:</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MaxTrialNumVar.set(110)</font><br clear="all">
  <br clear="all">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <font color="MidnightBlue">if os.path.exists(Str + '/TimeLimit.dat') == True:</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with open(Str + '/TimeLimit.dat', 'rb') as PickleInst[GetTaskID()]:</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TimeLimitVar.set(pickle.load(PickleInst[GetTaskID()]))</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;else:</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TimeLimitVar.set(600)</font><br clear="all">
  <br clear="all">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <font color="Blue">if os.path.exists(Str + '/PunishDur.dat') == True:</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with open(Str + '/PunishDur.dat', 'rb') as PickleInst[GetTaskID()]:</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PunishDurVar.set(pickle.load(PickleInst[GetTaskID()]))</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;else:</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PunishDurVar.set(10)</font><br clear="all">
  <br clear="all">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <font color="MidnightBlue">if os.path.exists(Str + '/LickDur.dat') == True:</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with open(Str + '/LickDur.dat', 'rb') as PickleInst[GetTaskID()]:</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">追加した課題パラメータのロード処理も追加します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Black">パネルが1つ増えたのでそのパネルへのタッチを検出するROIを追加します。</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<font color="MidnightBlue">PutRoiGui(0, 1, 1, 0) &nbsp;# Put setting GUI of the indicated ROI on ROI window (ROI number, Detection mode, Threshold direction,ShowSymbol or not)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font><font color="Blue">PutRoiGui(1, 1, 1, 0)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PutRoiGui(19, 0, 0, 1)</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with open(Str+'/MaxCorrectNum.dat', 'wb') as PickleInst[GetTaskID()]:</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pickle.dump(MaxCorrectNumVar.get(),PickleInst[GetTaskID()]) &nbsp; &nbsp; # Save a value of &quot;MaxCorrectNumVar&quot; as &quot;MaxCorrectNum.dat&quot; file</font><br clear="all">
  <br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with open(Str+'/MaxTrialNum.dat', 'wb') as PickleInst[GetTaskID()]:</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pickle.dump(MaxTrialNumVar.get(),PickleInst[GetTaskID()]) &nbsp; &nbsp; # Save a value of &quot;MaxCorrectNumVar&quot; as &quot;MaxCorrectNum.dat&quot;file</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with open(Str+'/TimeLimit.dat', 'wb') as PickleInst[GetTaskID()]:</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pickle.dump(TimeLimitVar.get(),PickleInst[GetTaskID()])</font><br clear="all">
  <br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with open(Str+'/PunishDur.dat', 'wb') as PickleInst[GetTaskID()]:</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pickle.dump(PunishDurVar.get(), PickleInst[GetTaskID()])</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with open(Str+'/LickDur.dat', 'wb') as PickleInst[GetTaskID()]:</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pickle.dump(LickDurVar.get(), PickleInst[GetTaskID()])</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  追加課題パラメータのセーブ処理も追加します。<br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp;if Phase == 1: &nbsp;# Waiting phase (Task will start when the set time arrives)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if Phase1_Init == 0: # If the initialization for phase1 has not done</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PutPreTaskButton() &nbsp;# Put &quot;StartNow&quot; and &quot;Back&quot; button on Main window</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mStatusVar = StringVar(MainWindowRoot) &nbsp;# Create a variable for status display</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mStatus = ttk.Label(MainWindowRightFrame, textvariable=mStatusVar) &nbsp;# Create label object and link it with Main window</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mStatus.place(x=10, y=0) &nbsp; &nbsp;# Place label object on the Main window</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mOngoingResultVar = StringVar(MainWindowRoot) &nbsp; # Create a variable for progress display</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Phase1_Init = 1 # Flat that phase1 has done</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mStatusVar.set('</font><font color="Blue">Test2 task</font><font color="MidnightBlue">(' + str(GetTaskID()) + ') &nbsp; &nbsp;Waiting...') &nbsp; &nbsp;# Show current status of the Operant House</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if IsStartTime() == 1: &nbsp;# Check whether task start time arrives</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;StartNow() &nbsp;# Start task (Phase number will be &quot;2&quot;)</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  課題名はTest2なのでフェーズ1のメッセージを変更します。<br clear="all">
  <img src="paste2491.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  ここから課題本体のコードがあるフェーズ2を改変して行きます。<br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp;if Phase == 2: &nbsp;# If it is during task</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if Phase2_Init == 0: # Initialization of the task</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PutEndTaskNowButton() &nbsp; # Put &quot;TaskEnd&quot; button on Main window</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mStatusVar.set('</font><font color="Blue">Test2 task</font><font color="MidnightBlue">(' + str(GetTaskID()) + ') &nbsp; &nbsp;Start time ' + str(TaskStartedMonth) + '/' + str(TaskStartedDay) + ' ' +str(TaskStartedHour) + ':' + str(TaskStartedMinute) + ' &nbsp; &nbsp;Running') &nbsp; &nbsp;# Substitute latest information about current task into &quot;mStatusVar&quot;</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mOngoingResult = ttk.Label(MainWindowRightFrame, textvariable=mOngoingResultVar)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mOngoingResult.place(x=10, y=18)</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  まずフェーズ2のメッセージを変えます。<br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Substitute task parameter values in StringVars into integer or string variable (to make the cord easeir to read)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MaxCorrectNum = int(MaxCorrectNumVar.get()) &nbsp; # Get the value of &quot;MaxCorrectNumVar&quot; and convert it from string tointeger and substitute into variable named &quot;MaxCorrectNum&quot;</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MaxTrialNum = int(MaxTrialNumVar.get())</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TimeLimit = int(TimeLimitVar.get())</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PunishDur = int(PunishDurVar.get())</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LickDur = int(LickDurVar.get())</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">最大試行数や罰時間の課題パラメータが増えたので対応する変数を追加します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Declar local variables for this task</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TrialNum = 0 &nbsp; &nbsp;# Current trial number</font><br clear="all">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<font color="MidnightBlue">CorrectNum = 0 &nbsp;# Current correct trial number</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IncorrectNum = 0 &nbsp; &nbsp;# Current incorrect trial number</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CorrectRate = 0.0 &nbsp; # Current correct rate</font><br clear="all">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<font color="MidnightBlue">TaskDur = 0 &nbsp;# This will keep the elapsed time during of task</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;NowDrinking = 0 # Use as trigger</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CorrectPanelID = 0 &nbsp;# ID number of current correct panel (0 or 1)</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;StartRecording() &nbsp;# Start camera capture / TTL signal output</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;StartLickRecording() &nbsp;# Start an entry of lick log</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LightCycleControlOff() &nbsp;# Deactivate automatic Light/Dark cycle illumination</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RoofLightOff() &nbsp;# Turn off the lights on roof (Digital output Ch13)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;InfraredLightOn() &nbsp; # Turn on the infrared LED illumination (Digital output Ch12)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DigitalOutOn(10) &nbsp; &nbsp; &nbsp; &nbsp;# Turn on cue LED connected to Ch10</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ServoPosInside(3) &nbsp; # Change the angle of water arm servo connected to Ch3 to inside position</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CreateNormalPanel(0) &nbsp;# Create a white-filled square panel as panel #0</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">さらに現在の試行数や正解数、不正解数、正解パネルのIDを保持するための変数も必要なため、それぞれTrilalNum, IncorrectNum, CorrectRate,CorrectPanelIDとして追加します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CreateNormalPanel(1)</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">パネルは2つ必要なのでパネルオブジェクト#1も追加します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt = open(Path + &quot;/&quot; + str(TimeNow.year) + &quot;_&quot; + str(TimeNow.month) + &quot;_&quot; + str(TimeNow.day) + &quot; &quot; + str(TimeNow.hour) + &quot;h&quot; + str(TimeNow.minute) + &quot;m Task&quot; + str(GetTaskID()) + &quot; Touch.txt&quot;, 'w') &nbsp;# Initialize the text exporter for a resultfile</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write('TrialNum\tResult\t\t\tyyyy/mm/dd\th:m\ts\n') &nbsp;# Write item name on the result file</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventCsv = open(Path + &quot;/&quot; + str(TimeNow.year) + &quot;_&quot; + str(TimeNow.month) + &quot;_&quot; + str(TimeNow.day) + &quot; &quot; + str(TimeNow.hour) + &quot;h&quot; + str(TimeNow.minute) + &quot;m Task&quot; + str(GetTaskID()) + &quot; Touch.csv&quot;, 'w')</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(&quot;Task #&quot; + str(GetTaskID()) + &quot; is started at &quot; + str(GetTaskStartedMonth()) + '/' + str(GetTaskStartedDay()) + ' ' + str(GetTaskStartedHour()) + ':' + str(GetTaskStartedMinute()) + ':' + str(GetTaskStartedSecond())) &nbsp;# Enter the start time in the consolewindow of Pycharm</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Timer_Start(5) &nbsp;# Start a timer #5 to measure the duration of the task</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Phase2 = 2 &nbsp;# Start task from the reward phase</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Phase2_Init = 1 # Flag indicating that initialization of Phase2 has done</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if Phase2 == 0: &nbsp; # Initiation of new trial</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TaskDur = Timer_GetSec(5)</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CorrectPanelID = int(random.random()*2) # Determine which panel will be assigned as &quot;correct&quot;</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print('CorrectPanelID: ' + str(CorrectPanelID))</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ShowPanel(CorrectPanelID) &nbsp; &nbsp;# Display panel #0</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Phase2 = 1</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">この課題では試行の冒頭でパネル#0と#1のどちらのパネルが正解になるか、ランダムで決めます。ここでは乱数を発生させる関数&quot;random.random()&quot;を用います。</font><br clear="all">
  <font color="Black">random.random()を実行すると0以上1未満の実数が返されるのでそれに2を掛けて小数点以下を切り捨てると、半々の確率で整数の0もしくは1になります。</font><br clear="all">
  <font color="Black">この整数を正解パネルの番号としてCorrectPanelIDへ代入します。</font><br clear="all">
  <font color="Black">最後にShowPanel()関数で正解パネルを表示させます。</font><br clear="all">
  <font color="Black">そしてタッチ待機フェーズであるPhase2=1へ移行します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if Phase2 == 1: &nbsp; # Panel presentation</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TouchedPanelID = DetectRoiNosepoke() &nbsp;# Examine which panel is touched (return panel ID. If none of the panels touched,return -1)</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if TouchedPanelID != -1 and TouchedPanelID != 19: # If mouse touches the panel</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TrialNum += 1</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">左右どちらかのパネルがタッチされると-1以外の値をDetectRoiNosepoke() が返すので現在の試行数を1増やします。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if TouchedPanelID == CorrectPanelID: &nbsp; &nbsp;# If touched panel is assigned as correct</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ServoPosInside(3) &nbsp; &nbsp;# Move the water nozzle into inside position</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DigitalOutOn(10) &nbsp; &nbsp;# Onset cue light</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HidePanel(0) &nbsp; &nbsp;# Turn off panel #0</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HidePanel(1) &nbsp; &nbsp;# Turn off panel #1</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;NowDrinking = 0</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CorrectNum += 1 &nbsp; &nbsp; # Increase the number of correct response</font><br clear="all">
  <br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write(str(TrialNum)+'\tPanelTouched(Correct)\t'+ str(TimeNow.year)+&quot;/&quot;+str(TimeNow.month)+&quot;/&quot;+str(TimeNow.day)+&quot;\t&quot;+str(TimeNow.hour)+&quot;:&quot;+str(TimeNow.minute)+&quot;\t&quot;+str(TimeNow.second)+&quot;.&quot;+str(TimeNow.microsecond//1000)+&quot;\n&quot;) # Write the response on the text file</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventCsv.write(str(TrialNum) + ',1,' + str(TimeNow.year) + &quot;,&quot; + str(TimeNow.month) + &quot;,&quot; + str(TimeNow.day) + &quot;,&quot; + str(TimeNow.hour) + &quot;,&quot; + str(TimeNow.minute) + &quot;,&quot; + str(TimeNow.second) + &quot;.&quot; + str(TimeNow.microsecond//1000)+&quot;\n&quot;) &nbsp;# Write the response on the csv file</font><br clear="all">
  <br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Phase2 = 2 &nbsp;# Start reward phase</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">もしタッチされたパネルが正解パネルであれば報酬フェーズの状態にし、正解タッチをログに記録し、Phase2=2として報酬フェーズへ移行します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Black">次に不正解パネルをタッチした場合の処理を追加します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if TouchedPanelID != CorrectPanelID: &nbsp; &nbsp;# If touched panel is assigned as incorrect</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ServoPosOutside(3) &nbsp; &nbsp;# Move the water nozzle into inside position</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">不正解時に正解時と同じノイズを出すため水ノズルを外側に動かします（ノイズが正解Cueになると他の装置のノイズが結果に干渉するため）。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HidePanel(0)</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HidePanel(1)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font><font color="Blue">RoofLightOn() &nbsp; &nbsp;# Turn on the ceiling illumination</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IncorrectNum += 1 &nbsp; &nbsp; # Increase the number of correct response</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write(str(TrialNum)+'\tPanelTouched(Incorrect)\t'+ str(TimeNow.year)+&quot;/&quot;+str(TimeNow.month)+&quot;/&quot;+str(TimeNow.day)+&quot;\t&quot;+str(TimeNow.hour)+&quot;:&quot;+str(TimeNow.minute)+&quot;\t&quot;+str(TimeNow.second)+&quot;.&quot;+str(TimeNow.microsecond//1000)+&quot;\n&quot;) # Write the response on the text file</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventCsv.write(str(TrialNum) + ',2,' + str(TimeNow.year) + &quot;,&quot; + str(TimeNow.month) + &quot;,&quot; + str(TimeNow.day) + &quot;,&quot; + str(TimeNow.hour) + &quot;,&quot; + str(TimeNow.minute) + &quot;,&quot; + str(TimeNow.second) + &quot;.&quot; + str(TimeNow.microsecond//1000)+&quot;\n&quot;) &nbsp;# Write the response on the csv file</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">罰フェーズのために天井の照明をオンにし、不正解数を増やし、不正解イベントをログへ記入します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Timer_Start(0) &nbsp;# Start punishment timer</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">罰時間は指定した時間だけ持続する必要があるのでタイマー#0を使って、罰が開始してからの時間を測ります。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Phase2 = 3 &nbsp;# Start punish phase</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">罰フェーズであるフェーズ3へ移行します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mOngoingResultVar.set('CorrectNum: ' + str(CorrectNum) + ' &nbsp;IncorrectNum: ' + str(IncorrectNum) + ' &nbsp;TrialNum: ' + str(TrialNum))</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if Timer_GetSec(5) &gt;= TimeLimit * 60: &nbsp; # If time limit of the task comes</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TaskDur = Timer_GetSec(5)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(&quot;Time limit elapsed&quot;)</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">この課題では正解数、不正解数、試行数が見れたら便利なので、メインウィンドウに表示される途中結果の表記を変更します。</font><br clear="all">
  <br clear="all">
  <img src="paste511.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if Phase2 == 2: &nbsp;# Reward phase</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if DetectRoiNosepoke() == 19 and NowDrinking == 0: &nbsp; &nbsp;# If the mouse initiates nose poking</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;NowDrinking = 1</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Timer_Start(0) &nbsp;# Start lick timer</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if NowDrinking == 1: &nbsp; &nbsp;# If the nose poke has begun</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if Timer_GetSec(0) &gt;= LickDur: &nbsp; # If the nosepoke duration exceeds the lick duration</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Timer_End(0) # End timer for measuring lick duration</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ServoPosMiddle(3) &nbsp; # Move water nozzle back to the middle position</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DigitalOutOff(10) &nbsp; # Turn off the cue LED</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;NowDrinking = 0</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font><font color="Blue">Phase2 = 4 &nbsp;# Go to After trial phase</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">報酬/罰フェーズ後にセッションを続けるか否か判断するAfter trial phaseを追加するので、報酬フェーズ終了後はAfter trial phaseへ移行させます</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if Phase2 == 3: &nbsp;# Punishment phase</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if Timer_GetSec(0) &gt;= PunishDur: &nbsp;# If punishment time is passed</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Timer_End(0) &nbsp;# End punishment timer1</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RoofLightOff()</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ServoPosMiddle(3) &nbsp;# Move water nozzle to the intermediate position</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Phase2 = 4 &nbsp;# Go to After trial phase</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">罰フェーズとしてただ経過時間をチェックし続け、時間が来たらAfter trial phaseへ移行するフェーズを作ります。</font><br clear="all">
  <font color="Black">タイマー#0の時間を毎フレームチェックして、もし課題パラメータとしてセットした罰時間を超えたら罰を終了し、After trial phaseへ移行するコードを追加します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Black">次に正解数や試行数が上限に達したかをチェックするAfter trial phaseを追加します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">&nbsp;</font><font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if Phase2 == 4: &nbsp;# After trial phase</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if CorrectNum &lt; MaxCorrectNum and TrialNum &lt; MaxTrialNum: &nbsp;# If the touch number doesn't exceed the maximum number</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Phase2 = 0</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">もし上限に達していない場合、再び試行の最初に戻るコードを記入します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if CorrectNum &gt;= MaxCorrectNum or TrialNum &gt;= MaxTrialNum: &nbsp;# If the touch number exceeds the maximum number</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TaskDur = Timer_GetSec(5) &nbsp;# Keep the task time</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Phase2 = -1 &nbsp;# Go to the task finalizing phase</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">もし達した場合、セッションの経過時間をTaskDurへ保持し、セッション終了処理へ移行するコードを記入します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Black">最後にセッション終了処理を改変します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<font color="MidnightBlue">if Phase2 == -1 or GetEndTaskNowButtonStat() == 1: &nbsp;# If the flag is set to finish the task</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LightCycleControlOn() &nbsp; # Activate automatic light/dark cycle</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ServoPosMiddle(3) &nbsp; # Moze servo nozzle into middle position</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DeleteAllPanel() &nbsp; &nbsp;# Remove a panel on touch screen</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;InfraredLightOff() &nbsp;# Turn off the infrared LED</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if GetRecordingStat() == 1: # If camera is capturing</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SetEndRecordingTimer(60) &nbsp; &nbsp;# Onset a timer to finish video recording after 60 frames (correspond about 2sec) from now</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Add summary of results into the result file</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font><font color="Blue">if CorrectNum &gt; 0 or IncorrectNum &gt; 0:</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CorrectRate = int(CorrectNum * 100.0 / TrialNum)</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write('TotalNum:' + str(TrialNum) + ' &nbsp;CorrectNum:' + str(CorrectNum) + ' &nbsp;IncorrectNum:' + str(IncorrectNum) + ' &nbsp;CorrectRate:' + str(CorrectRate) + '%\n')</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write('SessionStartTime: ' + str(GetTaskStartedMonth()) + '/' + str(GetTaskStartedDay()) + ' ' + str(GetTaskStartedHour()) + ':' + str(GetTaskStartedMinute()) + ':' + str(GetTaskStartedSecond()) + &quot;\n&quot;)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write('SessionEndTime: ' + str(TimeNow.month) + '/' + str(TimeNow.day) + ' ' + str(TimeNow.hour) + ':' +str(TimeNow.minute) + ':' + str(TimeNow.second + (TimeNow.microsecond // 1000) / 1000) + &quot;\n&quot;)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write('TaskDuration(sec): ' + str(TaskDur) + &quot;\n&quot;)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Add experimental conditions into the result file</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write('MaxCorrectNum: '+str(MaxCorrectNum)+&quot;\n&quot;)</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write('MaxTrialNum: ' + str(MaxTrialNum) + &quot;\n&quot;)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write('TimeLimit: ' + str(TimeLimit) + &quot;\n&quot;)</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write('PunishDur: ' + str(TimeLimit) + &quot;\n&quot;)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write('LickDur: ' + str(LickDur)+&quot;\n&quot;)</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write('RecordFPS: ' + str(GetRecordFps()) + &quot;\n&quot;) &nbsp;# Recorded frame number per second</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write(GetRoiSensitivity() + &quot;\n&quot;) &nbsp;# Settings of each ROI</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.write(GetServoAngle() + &quot;\n&quot;) &nbsp;# Set angles of each servo</font><br clear="all">
  <br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventTxt.close() &nbsp; &nbsp;# Close the text exporter for the result file</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Writer_TouchEventCsv.close()</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;EndLickRecording() &nbsp;# End lick log recording</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">この課題では不正解があるので新たに</font><font color="Blue">IncorrectNum</font><font color="Black">や</font><font color="Blue">TotalNum, CorrectRate</font><font color="Black">を計算して結果ファイルに記入します。また</font><font color="Blue">MaxTrialNum</font><font color="Black">と</font><font color="Blue">PunishDur</font><font color="Black">は新しい課題パラメータなのでこれらも記録します。</font><br clear="all">
  <br clear="all">
  <img src="paste1724.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Blue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font><font color="Navy">SendMail(DeviceNameVar.get()+' finished task '+str(GetTaskID())+</font><font color="Blue">'. TrialNum:'+str(TrialNum)+</font><font color="Navy">' Correct:'+str(CorrectNum)+</font><font color="Blue">'Incorrect:'+str(IncorrectNum)+' Rate:'+str(CorrectRate)</font><font color="Navy">+'% Dur:'+str(round(Timer_GetSec(5) / 60,1))+' min','The task is finished.') # Send aemail (correct number and task duration are added to email title)</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="Black">メールのタイトルに</font><font color="Blue">IncorrectNum</font><font color="Black">,</font><font color="Blue">TotalNum, CorrectRate</font><font color="Black">を追加します。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Phase = 1 &nbsp;# Go back to the task-waiting phase</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Phase2 = 0</font><br clear="all">
  <font color="MidnightBlue">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Phase2_Init = 0</font><br clear="all">
  <font color="Navy">=======================================================================================================================</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Black">これで課題91は完成しました。ちゃんと実行されるか試してみて下さい。</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Black">なお課題90と91でどこがどのように変わったのか知りたい場合はソースコードの差分をハイライトしてくれるWinMergeというソフトがあるのでそれでOperantHouse\TutorialにあるTask90と91を比較してみて下さい。</font></div>
  </div>
  <div id="footer">operanthouseのフッター</div>
  <div id="HPZLPPageTail" style="clear: both;"></div></div>
</body>

</html>
