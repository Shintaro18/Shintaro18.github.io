<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">

<!--2026/02/10 17:56:18-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta http-equiv="Content-Script-Type" content="text/javascript">
  <meta name="GENERATOR" content="ホームページV4">
  <title>ラズベリーパイ4のセットアップ - Kitaya lab</title>
  <link rel="stylesheet" href="02_white_a0_0010.css" type="text/css" media="all">
</head>

<body>
  <div id="page">
  <div id="header">operanthouseのヘッダー</div>
  <div id="title">
  <h1>Kitaya lab</h1></div>
  <div id="menubar"><div class="mainmenu"><ul><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="index.html" class="mainmenuitemlink"><span class="mainmenuitemmark">オペラントハウスとは</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="office1001038.html" class="mainmenuitemlink"><span class="mainmenuitemmark">What's Operant House?</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="profile1.html" class="mainmenuitemlink"><span class="mainmenuitemmark">行動解析君とは?</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="profile1076.html" class="mainmenuitemlink"><span class="mainmenuitemmark">Mr. Behavio?</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="profile1001.html" class="mainmenuitemlink"><span class="mainmenuitemmark">Gait analyzer</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="privacy1.html" class="mainmenuitemlink"><span class="mainmenuitemmark">プライバシーポリシー</span></a></span></span></span></li></ul>

</div></div>
  <div id="side1">
  <div class="submenu"><ul><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="index.html" class="submenuitemlink"><span class="submenuitemmark1">オペラントハウスとは?</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001.html" class="submenuitemlink"><span class="submenuitemmark1">制作の準備(ﾀﾞｳﾝﾛｰﾄﾞ)</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank.html" class="submenuitemlink"><span class="submenuitemmark1">3Dプリンターの準備</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank001.html" class="submenuitemlink"><span class="submenuitemmark1">オペラントハウスの製作</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001005.html" class="submenuitemlink"><span class="submenuitemmark2">パーツの印刷</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001007.html" class="submenuitemlink"><span class="submenuitemmark2">パーツの組み立て</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001008.html" class="submenuitemlink"><span class="submenuitemmark2">電子回路の作製１</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001009.html" class="submenuitemlink"><span class="submenuitemmark2">電子回路の作製２</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001011.html" class="submenuitemlink"><span class="submenuitemmark2">電子回路の組み付け（本体）</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001012.html" class="submenuitemlink"><span class="submenuitemmark2">電子回路の組み付け（蓋）</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001014.html" class="submenuitemlink"><span class="submenuitemmark2">配線</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001015.html" class="submenuitemlink"><span class="submenuitemmark2">ラズベリーパイ4のセットアップ</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001100.html" class="submenuitemlink"><span class="submenuitemmark2">ラズベリーパイ5のセットアップ</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank002.html" class="submenuitemlink"><span class="submenuitemmark1">オプションパーツについて</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001018.html" class="submenuitemlink"><span class="submenuitemmark1">ｵﾍﾟﾗﾝﾄﾊｳｽの使い方</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank003.html" class="submenuitemlink"><span class="submenuitemmark1">オリジナル課題の追加</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001036.html" class="submenuitemlink"><span class="submenuitemmark1">Command list</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001069.html" class="submenuitemlink"><span class="submenuitemmark1">デフォルト課題の説明</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001010.html" class="submenuitemlink"><span class="submenuitemmark1">Tips</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001037.html" class="submenuitemlink"><span class="submenuitemmark1">トラブルシューティング</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001103.html" class="submenuitemlink"><span class="submenuitemmark1">About copyright</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001070.html" class="submenuitemlink"><span class="submenuitemmark1">Go to English page</span></a></span></span></span></li></ul>
</div></div>
  <div id="side2"></div>
  <div id="main_wrapper000" class="HPZAutoMarginAdjuster">
  <div id="main">
  <h1>ラズベリーパイ4のセットアップ</h1>
  <hr>
  <br clear="all">
  <br clear="all">
  ※この解説では2022/9/22にリリースされたRaspberry PI OS (32bit)を使用しているのでもしインストールで問題が生じたら下記のアーカイブから同じものをインストールしてください。<br clear="all">
  http://downloads.raspberrypi.org/raspbian/images/<br clear="all">
  <br clear="all">
  ラズベリーパイの初期設定を行います。キーボードとマウスを接続して下さい。またwifiが無ければランケーブルをラズパイに接続して下さい。<br clear="all">
  電源スイッチがラズベリーパイの電源ケーブルに付いているのでそれを押してください。（しばらく経っても起動しない場合はもう一度スイッチを押します）。<br clear="all">
  <br clear="all">
  初期設定が完了したらこのようにディスクトップが表示されます。<br clear="all">
  <img src="paste267.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>ソフトキーボードのインストール</h2>
  (参考URL https://pimylifeup.com/raspberry-pi-on-screen-keyboard/)<br clear="all">
  <br clear="all">
  キーボードレスにするとスペースを節約できるのでソフトキーボードをインストールします。<br clear="all">
  画面左上のTerminalをクリックしてください。<br clear="all">
  <img src="paste1282.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  ターミナル画面が現れます。ラズパイではターミナルからプログラムをインストールします。<br clear="all">
  <img src="paste269.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  まずはラズパイのソフトを最新版に更新します。<br clear="all">
  半角で以下のようにターミナルに入力してEnterを押してください。<br clear="all">
  <img src="paste270.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  続いて以下のコマンドを入力してください。<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">sudo apt upgrade</font><br clear="all">
  <font color="MidnightBlue">sudo apt install onboard</font><br clear="all">
  <br clear="all">
  Do you want to continue?と聞かれたらyを入力してエンターキーを押します。<br clear="all">
  onboardがバーチャルキーボードのソフトです。<br clear="all">
  OnboardはUniversal accessから起動できます。<br clear="all">
  <img src="paste2711.jpg" alt="" border="0"><img src="paste272.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>画面スリープ機能のオフ</h2>
  ラズベリーパイはデフォルトの設定だと一定時間経つと画面がスリープするのですが実験には不便なのでその機能を切りましょう。<br clear="all">
  <br clear="all">
  Raspberry Pi Configurationを起動します。<br clear="all">
  <img src="paste135.jpg" alt="" height="403" width="328" border="0"><br clear="all">
  <br clear="all">
  DisplayタブのScreen BlankingをDisableにしてラズベリーパイを再起動してください。<br clear="all">
  <img src="paste2731.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>OpenCVのインストール</h2>
  (参考URL https://raspberrypi-guide.github.io/programming/install-opencv)<br clear="all">
  <br clear="all">
  次にカメラ撮影等に必要なライブラリであるOpenCVをインストールしていきます。<br clear="all">
  <br clear="all">
  まずはOpenCvに必要なパッケージを下のコマンドでインストールします。長いのでこのサイトをラズパイ上で開いてコピペすると良いです（コンソール画面上で右クリックからペーストできます）。<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">sudo apt-get install build-essential cmake pkg-config libjpeg-dev libtiff5-dev libjasper-dev libpng-dev libavcodec-dev libavformat-dev libswscale-dev libv4l-dev libxvidcore-dev libx264-dev libfontconfig1-dev libcairo2-dev libgdk-pixbuf2.0-dev libpango1.0-dev libgtk2.0-dev libgtk-3-dev libatlas-base-dev gfortran libhdf5-dev libhdf5-serial-dev libhdf5-103 python3-pyqt5 python3-dev -y</font><br clear="all">
  <br clear="all">
  下のコマンドでOpenCvをインストールします。<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">pip install opencv-python==4.5.3.56</font><br clear="all">
  <br clear="all">
  NumPyもインストールします。<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">pip install -U numpy</font><br clear="all">
  <br clear="all">
  これで完了です。無事インストールされたかを試してみましょう。<br clear="all">
  コンソールに以下のコマンドを順に入力してください。<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">python3</font><br clear="all">
  <font color="MidnightBlue">import cv2</font><br clear="all">
  <font color="MidnightBlue">cv2.__version__</font><br clear="all">
  <br clear="all">
  バージョンの番号が表示されたら正常にインストールされています。以下のコマンドを入れてpythonモードを終了します。<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">exit()</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>Arduinoのエディタのインストール</h2>
  ラズパイからArduinoへプログラムを送る際に必要なArduinoのエディタを以下のコマンドでインストールします。<br clear="all">
  <br clear="all">
  <font color="MidnightBlue">sudo apt install arduino</font><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>オペラントハウスの導入</h2>
  <br clear="all">
  オペラントハウスのソフトを<a href="office1001.html" class="HPZPageLink">ここ</a>からダウンロードしてディスクトップに解凍します。<br clear="all">
  <img src="paste2641.jpg" alt="" border="0"><br clear="all">
  <img src="paste1311.jpg" alt="" height="217" width="368" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  この画面になったら上矢印を押して1つ前の階層へ移動してください。<br clear="all">
  <img src="paste1321.jpg" alt="" height="260" width="598" border="0"><br clear="all">
  <br clear="all">
  OperantHouseのフォルダをディスクトップへドラッグ＆ドロップすればディスクトップへコピー出来ます。<br clear="all">
  <img src="paste1322.jpg" alt="" height="308" width="666" border="0"><br clear="all">
  <br clear="all">
  Arduinoへオペラントハウス用の動作プログラムを転送します。<br clear="all">
  OperantHouse -&gt; SerialConnectionWithPython16にあるSerialConnectionWithPython16.inoを開きます。<br clear="all">
  <br clear="all">
  Arduinoのエディタが立ち上がるので①Tools→Portで表示されているポートを選択後、②ビルド＆転送ボタンを押してプログラムを転送します。<br clear="all">
  <img src="paste13241.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  オペラントハウスを起動しましょう。<br clear="all">
  <br clear="all">
  ラズパイではpythonプログラムはThonnyで実行できます(pythonファイルはデフォルトでThonnyで開くように設定する事をお勧めします)。<br clear="all">
  <img src="paste2563.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  OperantHouseフォルダにある最新のOperantHouse*.pyをロードします。<br clear="all">
  <img src="paste2591.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  念のため冒頭のBasical settingが以下のようにラズパイモード、シングルモニタモード、飼育解析モード、カメラによるタッチ検出モードになっているか確認して下さい。<br clear="all">
  違っていたら直してSaveしてください（半角入力）。<br clear="all">
  <img src="paste2651.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  モニタの解像度が1280x800 pixelでない場合はここの数値を変更してください。タッチウィンドウのサイズと位置はここの値を元に決められます。<br clear="all">
  <img src="paste4023.jpg" alt="" height="389" width="625" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  Runボタンを押せばオペラントハウスが起動します。<br clear="all">
  <img src="paste2564.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  このような画面が出ます。<br clear="all">
  TouchWinボタンを押してパネルウィンドウを非表示にし、CamSizeボタンを押してカメラウィンドウを拡大します。<br clear="all">
  <img src="paste2565.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  カメラウィンドウに映像が映っていればOKです。<br clear="all">
  <img src="paste259.jpg" alt="" height="514" width="860" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  以下のボタンを押し、報酬cue、 赤外線照明、天井照明の切り替え、サーボの動作が起きるか確認します。<br clear="all">
  <img src="paste2566.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  問題がなければオペラントハウスのインストールは完了です。メインウィンドウ左のExitボタンかThonnyのStopボタンを押してプログラムを終了してください。<br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>ディスクトップの色変更</h2>
  ディスクトップに明るい色があるとマウスの気が散るのでディスクトップの色を黒くします。<br clear="all">
  何もない所を右クリックしてDesktop Preferencesを選択します。<br clear="all">
  <img src="paste264.jpg" alt="" height="176" width="194" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  以下のように変更してOKを押します。<br clear="all">
  <img src="paste2653.jpg" alt="" height="241" width="337" border="0"><img src="paste26811.jpg" alt="" height="241" width="336" border="0"><br clear="all">
  <br clear="all">
  これで黒くなりました。<br clear="all">
  <br clear="all">
  <br clear="all">
  なおここまで作業してきたようにラズパイのセットアップは手間が掛かるのでこの時点で止めたSDカードを作り、今後装置を増やす際はそのSDカードからコピーすることをお勧めします。<br clear="all">
  詳しくは左のメニューのTipsを見て下さい。<br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>TeamViewerのインストール</h2>
  最後にTeamViewer(リモートディスクトップのソフト)をインストールします。TeamViewerの公式サイトからラズパイ用のインストーラーをダウンロードしてインストールします。<br clear="all">
  <img src="paste2567.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  TeamViewerを起動したら装置の名前を入れ、テーマ色を黒にし、TeamViewerのアカウントでログインします(無料なので無ければ作ってください)。<br clear="all">
  <img src="paste2642.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  次にSecurityタブに移り、Easy Accessをオンにします。これで自分のPCからリモート操作する度にパスワードを入力せずに済みます。<br clear="all">
  自分のPCから接続できるか確認してください。<br clear="all">
  <img src="paste2652.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  以上でラズパイの設定は完了です。<br clear="all">
  <br clear="all">
  <br clear="all">
  ここから先は用途によって作業が異なります。<br clear="all">
  ①タッチパネルのみ使う場合　→　ｵﾌﾟｼｮﾝﾊﾟｰﾂ(ﾀｯﾁﾊﾟﾈﾙ)へ進んでください。<br clear="all">
  ②レバーモジュールも使う場合　→　ｵﾌﾟｼｮﾝﾊﾟｰﾂ(ﾚﾊﾞｰ)へ進んでください。<br clear="all">
  ③赤外線センサーバー（NNAMC3460PCEV）を使う場合　→　ｵﾌﾟｼｮﾝﾊﾟｰﾂ(ｾﾝｻｰﾊﾞｰ)へ進んでください。<br clear="all">
  <br clear="all">
  ①と③のどちらにすれば良いか分からない場合は取り敢えず①を試してみて下さい（③は隣り合ったマスクホールが縦長かつ近接している場合のみ必要です）。<br clear="all">
  </div>
  </div>
  <div id="footer">operanthouseのフッター</div>
  <div id="HPZLPPageTail" style="clear: both;"></div></div>
</body>

</html>
