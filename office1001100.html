<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">

<!--2026/02/10 17:56:18-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta http-equiv="Content-Script-Type" content="text/javascript">
  <meta name="GENERATOR" content="ホームページV4">
  <title>ラズベリーパイ5のセットアップ - Kitaya lab</title>
  <link rel="stylesheet" href="02_white_a0_0010.css" type="text/css" media="all">
</head>

<body>
  <div id="page">
  <div id="header">operanthouseのヘッダー</div>
  <div id="title">
  <h1>Kitaya lab</h1></div>
  <div id="menubar"><div class="mainmenu"><ul><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="index.html" class="mainmenuitemlink"><span class="mainmenuitemmark">オペラントハウスとは</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="office1001038.html" class="mainmenuitemlink"><span class="mainmenuitemmark">What's Operant House?</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="profile1.html" class="mainmenuitemlink"><span class="mainmenuitemmark">行動解析君とは?</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="profile1076.html" class="mainmenuitemlink"><span class="mainmenuitemmark">Mr. Behavio?</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="profile1001.html" class="mainmenuitemlink"><span class="mainmenuitemmark">Gait analyzer</span></a></span></span></span></li><li class="mainmenulistitem"><span class="mainmenuitem"><span class="mainmenuitemright"><span class="mainmenuitemcenter"><a href="privacy1.html" class="mainmenuitemlink"><span class="mainmenuitemmark">プライバシーポリシー</span></a></span></span></span></li></ul>
</div></div>
  <div id="side1">
  <div class="submenu"><ul><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="index.html" class="submenuitemlink"><span class="submenuitemmark1">オペラントハウスとは?</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001.html" class="submenuitemlink"><span class="submenuitemmark1">制作の準備(ﾀﾞｳﾝﾛｰﾄﾞ)</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank.html" class="submenuitemlink"><span class="submenuitemmark1">3Dプリンターの準備</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank001.html" class="submenuitemlink"><span class="submenuitemmark1">オペラントハウスの製作</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001005.html" class="submenuitemlink"><span class="submenuitemmark2">パーツの印刷</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001007.html" class="submenuitemlink"><span class="submenuitemmark2">パーツの組み立て</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001008.html" class="submenuitemlink"><span class="submenuitemmark2">電子回路の作製１</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001009.html" class="submenuitemlink"><span class="submenuitemmark2">電子回路の作製２</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001011.html" class="submenuitemlink"><span class="submenuitemmark2">電子回路の組み付け（本体）</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001012.html" class="submenuitemlink"><span class="submenuitemmark2">電子回路の組み付け（蓋）</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001014.html" class="submenuitemlink"><span class="submenuitemmark2">配線</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001015.html" class="submenuitemlink"><span class="submenuitemmark2">ラズベリーパイ4のセットアップ</span></a></span></span></span></li><li><span class="submenuitem" style="margin-left:10px;"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001100.html" class="submenuitemlink"><span class="submenuitemmark2">ラズベリーパイ5のセットアップ</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank002.html" class="submenuitemlink"><span class="submenuitemmark1">オプションパーツについて</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001018.html" class="submenuitemlink"><span class="submenuitemmark1">ｵﾍﾟﾗﾝﾄﾊｳｽの使い方</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="99_blank003.html" class="submenuitemlink"><span class="submenuitemmark1">オリジナル課題の追加</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001036.html" class="submenuitemlink"><span class="submenuitemmark1">Command list</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001069.html" class="submenuitemlink"><span class="submenuitemmark1">デフォルト課題の説明</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001010.html" class="submenuitemlink"><span class="submenuitemmark1">Tips</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001037.html" class="submenuitemlink"><span class="submenuitemmark1">トラブルシューティング</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001103.html" class="submenuitemlink"><span class="submenuitemmark1">About copyright</span></a></span></span></span></li><li><span class="submenuitem"><span class="submenuitemright"><span class="submenuitemcenter"><a href="office1001070.html" class="submenuitemlink"><span class="submenuitemmark1">Go to English page</span></a></span></span></span></li></ul>
</div></div>
  <div id="side2"></div>
  <div id="main_wrapper000" class="HPZAutoMarginAdjuster">
  <div id="main">
  <h1>ラズベリーパイ5のセットアップ</h1>
  <hr>
  <br clear="all">
  <br clear="all">
  ラズパイ5はラズパイ4の後継デバイスで処理速度が向上しています。しかしながら電源の必要電流も上がっているので(3A→5A)、5V 3Aの電源を用意してください。<br clear="all">
  ここの解説では2025/10/1にリリースされた64bit Debian version 13 (trixie)を用いて解説を行います。<br clear="all">
  これ以降のバージョンでも恐らくこの解説通りに操作すればセットアップできると思いますが、上手く行かなかったらこのバージョンをRaspberry Pi OSのArchiveから見つけてイメージをインストールしてください。<br clear="all">
  <br clear="all">
  ラズパイに電源ゲーブル、キーボード、マウスを接続し、wifiを設定してください。wifiが無ければランケーブルをラズパイに接続して下さい。電源ケーブルにスイッチがある場合はそれも入れてください。<br clear="all">
  SDカードをラズパイにセットしてラズパイ本体の電源ボタン(本体側面)を押すと初期設定の画面が現れます。この時入力したユーザー名とパスワードは後でrealVNCを用いたリモートデスクトップで必要になるのでメモしておいてください。<br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  初期設定が完了したらこのようにディスクトップが表示されます。<br clear="all">
  <img src="paste267.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>システムアップデート</h2>
  <h2><br class="HPZAutoBR"></h2>
  ここをクリックしてコンソールを起動<br clear="all">
  <img src="paste1282.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  ターミナルが現れます。ラズパイではターミナルからプログラムをインストールします。<br clear="all">
  <img src="paste269.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  まずはラズパイのソフトを最新版に更新します。ターミナルに下記のコマンドを入力してください。<br clear="all">
  <br clear="all">
  <b>sudo apt update</b><br clear="all">
  <br clear="all">
  と半角で入力して<b>Enter</b>を押してください。ターミナルを用いたインストールではインストール中にDo you want to continue?的なメッセージでプロセスが止まることがあるのでそのような時は対応するキー（大抵は<b>y</b>）を入力し、<b>Ener</b>を押してプロセスを進めてください。<br clear="all">
  <img src="paste270.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  処理が終わったら同様に以下のコマンドも入力してください。<br clear="all">
  <br clear="all">
  <b>sudo apt upgrade -y</b><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>オンスクリーン キーボードのインストール</h2>
  <br clear="all">
  <br clear="all">
  キーボードレスにするとスペースを節約できるのでソフトキーボードをインストールします。<br clear="all">
  ターミナルを開いてください。<br clear="all">
  <br clear="all">
  <b>sudo apt install onboard</b><br clear="all">
  <br clear="all">
  <br clear="all">
  Onboardがバーチャルキーボードのソフトです。OnboardはUniversal accessから起動できます。<br clear="all">
  <img src="paste3962.jpg" alt="" height="389" width="313" border="0"><br clear="all">
  <img src="paste272.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>OpenCVのインストール</h2>
  <br clear="all">
  次にカメラのキャプチャーにひつようなpythonプラグインであるOpenCVをインストールします。<br clear="all">
  ターミナルに以下のコマンドを入力してください。<br clear="all">
  <br clear="all">
  <b>sudo apt install python3-opencv</b><br clear="all">
  <br clear="all">
  <br clear="all">
  もしイ<font color="Black">ンストールが成功したか調べたい場合はコンソールに以下のコマンドを入力してください。バージョン番号が出れば成功しています。</font><br clear="all">
  <font color="Black">なお最後のコマンドのアンダーバー(<b>__</b>)は1文字ではなく2文字ですので注意してください。</font><br clear="all">
  <br clear="all">
  <font color="Black"><b>python3</b></font><br clear="all">
  <font color="Black"><b>import cv2</b></font><br clear="all">
  <font color="Black"><b>cv2.__version__</b></font><br clear="all">
  <font color="#000000"><img src="paste396.jpg" alt="" border="0"></font><br clear="all">
  <br clear="all">
  <br clear="all">
  <font color="Black">確認が終わったら下記のコマンドでpythonを終了します。</font><br clear="all">
  <br clear="all">
  <font color="Black"><b>exit()</b></font><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>画面スリープ機能のオフ</h2>
  <h2><br class="HPZAutoBR"></h2>
  ラズベリーパイはデフォルトの設定だと一定時間経つと画面がスリープするのですが、これだと困るのでこの機能を切りましょう。<br clear="all">
  <br clear="all">
  Raspberry Pi Configurationを起動します。<br clear="all">
  <img src="paste135.jpg" alt="" height="403" width="328" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  DisplayタブのScreen BlankingをDisableにしてラズベリーパイを再起動してください。<br clear="all">
  <img src="paste2731.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>Arduinoのエディタのインストール</h2>
  <h2><br class="HPZAutoBR"></h2>
  ラズパイからArduinoへプログラムを送る際に必要なArduinoのエディタを以下のコマンドでインストールします。<br clear="all">
  <br clear="all">
  <b>sudo apt install arduino</b><br clear="all">
  <br clear="all">
  もしここで<b>E: Unmet dependencies. Try 'apt --fix-broken install' with no packages (or specify a solution).</b>というエラーが出た場合、以下のコマンドを実行してください。<br clear="all">
  <br clear="all">
  <b>sudo apt --fix-broken install<br clear="all">
  sudo apt install arduino</b><br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>オペラントハウスの導入</h2>
  <br clear="all">
  オペラントハウスのソフトを<a href="office1001.html" class="HPZPageLink">ここ</a>からダウンロードしてディスクトップに解凍します。<br clear="all">
  <img src="paste2641.jpg" alt="" border="0"><br clear="all">
  <img src="paste1311.jpg" alt="" height="217" width="368" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  この画面になったら上矢印を押して1つ前の階層へ移動してください。<br clear="all">
  <img src="paste1321.jpg" alt="" height="260" width="598" border="0"><br clear="all">
  <br clear="all">
  OperantHouseのフォルダをディスクトップへドラッグ＆ドロップすればディスクトップへコピー出来ます。<br clear="all">
  <img src="paste1322.jpg" alt="" height="308" width="666" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  Arduinoへオペラントハウス用の動作プログラムを転送します。<br clear="all">
  OperantHouse -&gt; SerialConnectionWithPython16にあるSerialConnectionWithPython16.inoを開きます。<br clear="all">
  <img src="paste398.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  ポートがArduino Unoに設定されている事を確認します。<br clear="all">
  <img src="paste3971.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  Servo用のライブラリーをインストールします。<br clear="all">
  <img src="paste3991.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  servoと検索して最新版の<b>Servo</b>ライブラリーをインストールします。<br clear="all">
  <img src="paste3963.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  このような選択肢が出たら<b>Install all</b>を選択<br clear="all">
  <img src="paste4001.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  次にビルド＆転送ボタンを押してプログラムを転送します。<br clear="all">
  <img src="paste4021.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  次にオペラントハウスを起動しましょう。<br clear="all">
  ラズパイではpythonプログラムはThonnyで実行できます (pythonファイルはデフォルトでThonnyで開くように設定する事をお勧めします)。<br clear="all">
  <img src="paste4032.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  OperantHouseフォルダにある最新のOperantHouse*.pyをロードします。<br clear="all">
  <img src="paste2591.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  念のため冒頭のGeneral settingが以下のようにラズパイモード、シングルモニタモード、飼育解析モード、カメラによるタッチ検出モードになっているか確認して下さい。<br clear="all">
  違っていたら直してSaveしてください（半角入力）。<br clear="all">
  <img src="paste2651.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  モニタの解像度が1280x800 pixelでない場合はここの数値を変更してください。タッチウィンドウのサイズと位置はここの値を元に決められます。<br clear="all">
  <img src="paste4023.jpg" alt="" height="389" width="625" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  Runボタンを押せばオペラントハウスが起動します。<br clear="all">
  <img src="paste2564.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  このような画面が出ます。<br clear="all">
  TouchWinボタンを押してパネルウィンドウを非表示にし、CamSizeボタンを押してカメラウィンドウを拡大します。<br clear="all">
  <img src="paste2565.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  カメラウィンドウに映像が映っていればOKです。<br clear="all">
  <img src="paste259.jpg" alt="" height="514" width="860" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  以下のボタンを押し、報酬cue、 赤外線照明、天井照明の切り替え、サーボの動作が起きるか確認します。<br clear="all">
  <img src="paste2566.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  問題がなければオペラントハウスのインストールは完了です。メインウィンドウ左のExitボタンかThonnyのStopボタンを押してプログラムを終了してください。<br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>ディスクトップの色変更</h2>
  <h2><br class="HPZAutoBR"></h2>
  ディスクトップに明るい色があるとマウスの気が散るのでディスクトップの色を黒くします。<br clear="all">
  何もない所を右クリックしてDesktop Preferencesを選択します。<br clear="all">
  <img src="paste264.jpg" alt="" height="176" width="194" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  以下のように変更してOKを押します。<br clear="all">
  <img src="paste2653.jpg" alt="" height="241" width="337" border="0"><img src="paste26811.jpg" alt="" height="241" width="336" border="0"><br clear="all">
  <br clear="all">
  これで黒くなりました。<br clear="all">
  <br clear="all">
  <br clear="all">
  なおここまで作業してきたようにラズパイのセットアップは手間が掛かるのでこの時点で止めたSDカードを作り、今後装置を増やす際はそのSDカードからコピーすることをお勧めします。<br clear="all">
  詳しくは左のメニューのTipsを見て下さい。<br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <h2>リモートデスクトップの設定</h2>
  <br clear="all">
  オペラントハウスはタッチモニターしかない場合、実験中に操作することが困難です。そのため基本的にrealVNCと呼ばれるリモートデスクトップソフトを介して操作用PCから操作します。realVNCはRaspberry Pi Configuration<br clear="all">
  <img src="paste4041.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  <b>Interfaces</b>タブの<b>VNC</b>をオンにしてOKを押してラズパイを再起動します。<br clear="all">
  <img src="paste4051.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  再起動後にタスクバーの右側にこのようなアイコンが出たらOKです。<br clear="all">
  <img src="paste4061.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  次にネットワークのアイコン(LANケーブル接続の例。Wifiだと別のアイコンになります)をクリックして表示されたIPをメモしてください（これはインターネット上のラズパイの住所のような物です。デフォルト設定だとラズパイを再起動する度にこの番号は変わってしまうため、もし変えたくないのであればIPを固定する設定を解説サイトなどを参考にして行ってください）。<br clear="all">
  <img src="paste40721.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  次に操作用PC（同じ建物内にある必要あり）にrealVNCをインストールします。ラズパイを登録するため<b>New connection</b>を選択します。<br clear="all">
  <img src="paste3965.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  先ほどメモしたIPアドレスとデバイス名を入力します。デバイス名はRealVNCで表示される名前であり適当で構いません。<br clear="all">
  <img src="paste3992.jpg" alt="" height="646" width="481" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  OKを押し、登録されたデバイスを開くとユーザー名とパスワードを聞かれます。ラズパイを初回起動したときに設定したユーザー名とパスワードを入力してください。<br clear="all">
  <img src="paste400.jpg" alt="" height="329" width="375" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  なおユーザー名はコンソールで<b>whoami</b>と入力すると確認できます (Raspberry Pi ConfigurationにあるHostnameは別物なので注意)。<br clear="all">
  パスワードはRaspberry Pi Configuration→SystemのChange Passwordで変えられます。<br clear="all">
  <img src="paste4022.jpg" alt="" border="0"><br clear="all">
  <br clear="all">
  <br clear="all">
  なおrealVNCでは同じ建物内(LAN)であれば無料ですが、建物外（自宅）からのアクセス（インターネット経由）であれば有料アカウントを作る必要があります。もしお金を掛けずに自宅からアクセスしたい場合は自宅PCから操作用PCまでのChrome remoteで繋ぎ、そこからrealVNC経由でオペラントハウスを操作してください。<br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  <br clear="all">
  以上でラズパイの設定は完了です。<br clear="all">
  <br clear="all">
  <br clear="all">
  ここから先は用途によって作業が異なります。<br clear="all">
  ①タッチパネルのみ使う場合　→　<a href="office1001027.html" class="HPZPageLink">オプションパーツ - 赤外線カメラ検出</a> へ進んでください。<br clear="all">
  ②レバーモジュールも使う場合　→　<a href="office1001028.html" class="HPZPageLink">オプションパーツ - レバーモジュール</a>へ進んでください。<br clear="all">
  ③赤外線センサーバー（NNAMC3460PCEV）を使う場合　→　<a href="office1001029.html" class="HPZPageLink">オプションパーツ - 赤外線センサーバー検出</a> へ進んでください。<br clear="all">
  <br clear="all">
  ①と③のどちらにすれば良いか分からない場合は取り敢えず①を試してみて下さい（③は隣り合ったマスクホールが縦長かつ近接している場合のみ必要です）。<br clear="all">
  </div>
  </div>
  <div id="footer">operanthouseのフッター</div>
  <div id="HPZLPPageTail" style="clear: both;"></div></div>
</body>

</html>
